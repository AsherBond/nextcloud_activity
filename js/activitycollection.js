!function(){OCA.Activity=OCA.Activity||{};var t=OC.Backbone.Collection.extend({firstKnownId:0,lastGivenId:0,hasMore:!1,_objectId:null,_objectType:null,model:OCA.Activity.ActivityModel,setObjectId:function(t){this._objectId=t,this.firstKnownId=0,this.lastGivenId=0,this.hasMore=!1},setObjectType:function(t){this._objectType=t,this.firstKnownId=0,this.lastGivenId=0,this.hasMore=!1},parse:function(t,i){return this._saveHeaders(i.xhr.getAllResponseHeaders()),304===i.xhr.status?[]:t.ocs.data},_saveHeaders:function(t){var i=this;this.hasMore=!1,t=t.split("\n"),_.each(t,(function(t){var e=t.split(":");"x-activity-first-known"===e[0].toLowerCase()?i.firstKnownId=parseInt(e[1].trim(),10):"x-activity-last-given"===e[0].toLowerCase()?i.lastGivenId=parseInt(e[1].trim(),10):"link"===e[0].toLowerCase()&&(i.hasMore=!0)}))},url:function(){var t={format:"json"},i=OC.linkToOCS("apps/activity/api/v2/activity",2)+"filter";return this.lastGivenId&&(t.since=this.lastGivenId),this._objectId&&this._objectType&&(t.object_type=this._objectType,t.object_id=this._objectId),i+"?"+OC.buildQueryString(t)}});OCA.Activity.ActivityCollection=t}();